{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _reactDom = require(\"react-dom\");\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _ContentMetaResolver = _interopRequireDefault(require(\"./ContentMetaResolver\"));\n\nvar _defaultPositionResolver = _interopRequireDefault(require(\"./helpers/defaultPositionResolver\"));\n\nvar _scrollController = require(\"../../libs/scrollController\");\n\nfunction _templateObject() {\n  var data = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n    position: fixed;\\n    z-index: 999999999;\\n    top: \", \"px;\\n    left: \", \"px;\\n    \", \";\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nvar Container = _styledComponents[\"default\"].div(_templateObject(), function (props) {\n  return props.position && props.position.top;\n}, function (props) {\n  return props.position && props.position.left;\n}, function (props) {\n  return props.position && props.position.width && \"\\n            width: \".concat(props.position.width, \"px;\\n        \");\n});\n\nvar resolveElement = function resolveElement(ref) {\n  if (typeof ref === 'function') {\n    var ret = ref();\n    return ret && ret.current;\n  }\n\n  return ref && ref.current;\n};\n\nvar resolveTriggerMeta = function resolveTriggerMeta(ref) {\n  var element = resolveElement(ref);\n\n  if (element instanceof Element) {\n    var _element$getClientRec = element.getClientRects()[0],\n        x = _element$getClientRec.x,\n        y = _element$getClientRec.y,\n        width = _element$getClientRec.width,\n        height = _element$getClientRec.height;\n    return {\n      leftUpAnchor: {\n        x: x,\n        y: y\n      },\n      leftBottomAnchor: {\n        x: x,\n        y: y + height\n      },\n      rightUpAnchor: {\n        x: x + width,\n        y: y\n      },\n      rightBottomAnchor: {\n        x: x + width,\n        y: y + height\n      },\n      width: width,\n      height: height\n    };\n  } // eslint-disable-next-line no-console\n\n\n  console.debug(\"The \\\"triggerElementRef\\\" provided is not resolving to a valid DOM Element.\");\n  return {\n    leftUpAnchor: {\n      x: 0,\n      y: 0\n    },\n    leftBottomAnchor: {\n      x: 0,\n      y: 0\n    },\n    rightUpAnchor: {\n      x: 0,\n      y: 0\n    },\n    rightBottomAnchor: {\n      x: 0,\n      y: 0\n    },\n    width: 0,\n    height: 0\n  };\n};\n\nvar resolveViewportMeta = function resolveViewportMeta() {\n  return {\n    width: window.innerWidth,\n    height: window.innerHeight\n  };\n};\n\nvar resolvePosition = function resolvePosition(opts) {\n  var triggerMeta = opts.triggerMeta,\n      viewportMeta = opts.viewportMeta,\n      contentMeta = opts.contentMeta,\n      positionResolver = opts.positionResolver;\n\n  if (typeof positionResolver === 'function') {\n    var pos = positionResolver({\n      trigger: triggerMeta,\n      viewport: viewportMeta,\n      content: contentMeta\n    });\n\n    if ((0, _typeof2[\"default\"])(pos) === 'object') {\n      return pos;\n    }\n  }\n\n  return (0, _defaultPositionResolver[\"default\"])({\n    trigger: triggerMeta,\n    viewport: viewportMeta,\n    content: contentMeta\n  });\n};\n/**\n * This component implements the positioning of a component (inserted in the DOM at the body level) based on a trigger DOM element. By the way of example, you can think of the use case of a Menu Options, Tooltip, Popup that should be floating on top of all the elements and it should be correctly positioned based on the component/element that triggers the show/open action.\n * @category Internal\n */\n\n\nvar InternalOverlay = function InternalOverlay(props) {\n  var ContentComponent = props.render,\n      isVisible = props.isVisible,\n      triggerElementRef = props.triggerElementRef,\n      positionResolver = props.positionResolver,\n      onOpened = props.onOpened,\n      children = props.children;\n\n  var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      contentMeta = _useState2[0],\n      updateContentMeta = _useState2[1];\n\n  (0, _react.useEffect)(function () {\n    if (isVisible && contentMeta) {\n      onOpened();\n      (0, _scrollController.disableBodyScroll)(undefined, {\n        reserveScrollBarGap: true\n      });\n    }\n\n    return function () {\n      (0, _scrollController.enableBodyScroll)();\n    };\n  }, [isVisible, contentMeta, onOpened]);\n\n  if (isVisible) {\n    var content = children || _react[\"default\"].createElement(ContentComponent, null);\n\n    if (contentMeta) {\n      var triggerMeta = resolveTriggerMeta(triggerElementRef);\n      var viewportMeta = resolveViewportMeta();\n      var position = resolvePosition({\n        triggerMeta: triggerMeta,\n        contentMeta: contentMeta,\n        viewportMeta: viewportMeta,\n        positionResolver: positionResolver\n      });\n      return (0, _reactDom.createPortal)(_react[\"default\"].createElement(Container, {\n        position: position\n      }, content), document.body);\n    }\n\n    return _react[\"default\"].createElement(_ContentMetaResolver[\"default\"], {\n      component: ContentComponent,\n      onResolved: updateContentMeta\n    }, children);\n  }\n\n  return null;\n};\n\nInternalOverlay.propTypes = {\n  /** Functional component or class that will be rendered when the isVisible prop is true. */\n  render: _propTypes[\"default\"].func,\n\n  /** Controls whether the InternalOverlay is visible or not. If true, the content of the Overlay is shown. */\n  isVisible: _propTypes[\"default\"].bool,\n\n  /** Ref or function that returns a ref to a DOM element, the DOM element resolved by this ref will be used to positioning the component passed when visible. */\n  triggerElementRef: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].object, _propTypes[\"default\"].func]).isRequired,\n\n  /** It could be used to write your own position resolution. The function passed here will receive the necessary data to compute an object with { top, left } CSS position of the component rendered. */\n  positionResolver: _propTypes[\"default\"].func,\n\n  /** A callback triggered when the overlay component is opened. This is useful for example to set focus\n   * to an element after it is opened.\n   */\n  onOpened: _propTypes[\"default\"].func,\n\n  /**\n   * @ignore\n   */\n  children: _propTypes[\"default\"].node\n};\nInternalOverlay.defaultProps = {\n  render: function render() {},\n  isVisible: false,\n  positionResolver: undefined,\n  onOpened: function onOpened() {},\n  children: undefined\n};\nInternalOverlay.defaultPositionResolver = _defaultPositionResolver[\"default\"];\nvar _default = InternalOverlay;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/Saul/Desktop/shack2/node_modules/react-rainbow-components/components/InternalOverlay/index.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","Object","defineProperty","exports","value","_slicedToArray2","_typeof2","_taggedTemplateLiteral2","_react","_propTypes","_reactDom","_styledComponents","_ContentMetaResolver","_defaultPositionResolver","_scrollController","_templateObject","data","Container","div","props","position","top","left","width","concat","resolveElement","ref","ret","current","resolveTriggerMeta","element","Element","_element$getClientRec","getClientRects","x","y","height","leftUpAnchor","leftBottomAnchor","rightUpAnchor","rightBottomAnchor","console","debug","resolveViewportMeta","window","innerWidth","innerHeight","resolvePosition","opts","triggerMeta","viewportMeta","contentMeta","positionResolver","pos","trigger","viewport","content","InternalOverlay","ContentComponent","render","isVisible","triggerElementRef","onOpened","children","_useState","useState","_useState2","updateContentMeta","useEffect","disableBodyScroll","undefined","reserveScrollBarGap","enableBodyScroll","createElement","createPortal","document","body","component","onResolved","propTypes","func","bool","oneOfType","object","isRequired","node","defaultProps","defaultPositionResolver","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _reactDom = require(\"react-dom\");\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _ContentMetaResolver = _interopRequireDefault(require(\"./ContentMetaResolver\"));\n\nvar _defaultPositionResolver = _interopRequireDefault(require(\"./helpers/defaultPositionResolver\"));\n\nvar _scrollController = require(\"../../libs/scrollController\");\n\nfunction _templateObject() {\n  var data = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n    position: fixed;\\n    z-index: 999999999;\\n    top: \", \"px;\\n    left: \", \"px;\\n    \", \";\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nvar Container = _styledComponents[\"default\"].div(_templateObject(), function (props) {\n  return props.position && props.position.top;\n}, function (props) {\n  return props.position && props.position.left;\n}, function (props) {\n  return props.position && props.position.width && \"\\n            width: \".concat(props.position.width, \"px;\\n        \");\n});\n\nvar resolveElement = function resolveElement(ref) {\n  if (typeof ref === 'function') {\n    var ret = ref();\n    return ret && ret.current;\n  }\n\n  return ref && ref.current;\n};\n\nvar resolveTriggerMeta = function resolveTriggerMeta(ref) {\n  var element = resolveElement(ref);\n\n  if (element instanceof Element) {\n    var _element$getClientRec = element.getClientRects()[0],\n        x = _element$getClientRec.x,\n        y = _element$getClientRec.y,\n        width = _element$getClientRec.width,\n        height = _element$getClientRec.height;\n    return {\n      leftUpAnchor: {\n        x: x,\n        y: y\n      },\n      leftBottomAnchor: {\n        x: x,\n        y: y + height\n      },\n      rightUpAnchor: {\n        x: x + width,\n        y: y\n      },\n      rightBottomAnchor: {\n        x: x + width,\n        y: y + height\n      },\n      width: width,\n      height: height\n    };\n  } // eslint-disable-next-line no-console\n\n\n  console.debug(\"The \\\"triggerElementRef\\\" provided is not resolving to a valid DOM Element.\");\n  return {\n    leftUpAnchor: {\n      x: 0,\n      y: 0\n    },\n    leftBottomAnchor: {\n      x: 0,\n      y: 0\n    },\n    rightUpAnchor: {\n      x: 0,\n      y: 0\n    },\n    rightBottomAnchor: {\n      x: 0,\n      y: 0\n    },\n    width: 0,\n    height: 0\n  };\n};\n\nvar resolveViewportMeta = function resolveViewportMeta() {\n  return {\n    width: window.innerWidth,\n    height: window.innerHeight\n  };\n};\n\nvar resolvePosition = function resolvePosition(opts) {\n  var triggerMeta = opts.triggerMeta,\n      viewportMeta = opts.viewportMeta,\n      contentMeta = opts.contentMeta,\n      positionResolver = opts.positionResolver;\n\n  if (typeof positionResolver === 'function') {\n    var pos = positionResolver({\n      trigger: triggerMeta,\n      viewport: viewportMeta,\n      content: contentMeta\n    });\n\n    if ((0, _typeof2[\"default\"])(pos) === 'object') {\n      return pos;\n    }\n  }\n\n  return (0, _defaultPositionResolver[\"default\"])({\n    trigger: triggerMeta,\n    viewport: viewportMeta,\n    content: contentMeta\n  });\n};\n/**\n * This component implements the positioning of a component (inserted in the DOM at the body level) based on a trigger DOM element. By the way of example, you can think of the use case of a Menu Options, Tooltip, Popup that should be floating on top of all the elements and it should be correctly positioned based on the component/element that triggers the show/open action.\n * @category Internal\n */\n\n\nvar InternalOverlay = function InternalOverlay(props) {\n  var ContentComponent = props.render,\n      isVisible = props.isVisible,\n      triggerElementRef = props.triggerElementRef,\n      positionResolver = props.positionResolver,\n      onOpened = props.onOpened,\n      children = props.children;\n\n  var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      contentMeta = _useState2[0],\n      updateContentMeta = _useState2[1];\n\n  (0, _react.useEffect)(function () {\n    if (isVisible && contentMeta) {\n      onOpened();\n      (0, _scrollController.disableBodyScroll)(undefined, {\n        reserveScrollBarGap: true\n      });\n    }\n\n    return function () {\n      (0, _scrollController.enableBodyScroll)();\n    };\n  }, [isVisible, contentMeta, onOpened]);\n\n  if (isVisible) {\n    var content = children || _react[\"default\"].createElement(ContentComponent, null);\n\n    if (contentMeta) {\n      var triggerMeta = resolveTriggerMeta(triggerElementRef);\n      var viewportMeta = resolveViewportMeta();\n      var position = resolvePosition({\n        triggerMeta: triggerMeta,\n        contentMeta: contentMeta,\n        viewportMeta: viewportMeta,\n        positionResolver: positionResolver\n      });\n      return (0, _reactDom.createPortal)(_react[\"default\"].createElement(Container, {\n        position: position\n      }, content), document.body);\n    }\n\n    return _react[\"default\"].createElement(_ContentMetaResolver[\"default\"], {\n      component: ContentComponent,\n      onResolved: updateContentMeta\n    }, children);\n  }\n\n  return null;\n};\n\nInternalOverlay.propTypes = {\n  /** Functional component or class that will be rendered when the isVisible prop is true. */\n  render: _propTypes[\"default\"].func,\n\n  /** Controls whether the InternalOverlay is visible or not. If true, the content of the Overlay is shown. */\n  isVisible: _propTypes[\"default\"].bool,\n\n  /** Ref or function that returns a ref to a DOM element, the DOM element resolved by this ref will be used to positioning the component passed when visible. */\n  triggerElementRef: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].object, _propTypes[\"default\"].func]).isRequired,\n\n  /** It could be used to write your own position resolution. The function passed here will receive the necessary data to compute an object with { top, left } CSS position of the component rendered. */\n  positionResolver: _propTypes[\"default\"].func,\n\n  /** A callback triggered when the overlay component is opened. This is useful for example to set focus\n   * to an element after it is opened.\n   */\n  onOpened: _propTypes[\"default\"].func,\n\n  /**\n   * @ignore\n   */\n  children: _propTypes[\"default\"].node\n};\nInternalOverlay.defaultProps = {\n  render: function render() {},\n  isVisible: false,\n  positionResolver: undefined,\n  onOpened: function onOpened() {},\n  children: undefined\n};\nInternalOverlay.defaultPositionResolver = _defaultPositionResolver[\"default\"];\nvar _default = InternalOverlay;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}